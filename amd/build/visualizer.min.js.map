{"version":3,"file":"visualizer.min.js","sources":["../src/visualizer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Graphic drawing for the local_yetkinlik plugin.\n *\n * @module      local_yetkinlik/charts\n * @copyright   2026 Hakan Çiğci {@link https://hakancigci.com.tr}\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/chartjs'], function($, Chart) {\n    \"use strict\";\n\n    return {\n        /**\n         * Initialize Student vs Class/Course comparison chart.\n         *\n         * @param {Object|Array} params The data parameters for the chart.\n         */\n        initStudentClass: function(params) {\n            var data = Array.isArray(params) ? params[0] : params;\n            var canvas = document.getElementById('studentClassChart');\n\n            if (!canvas || !data) {\n                return;\n            }\n\n            var existingChart = Chart.getChart(canvas);\n            if (existingChart) {\n                existingChart.destroy();\n            }\n\n            new Chart(canvas.getContext('2d'), {\n                type: 'bar',\n                data: {\n                    labels: data.labels,\n                    datasets: [\n                        {\n                            label: data.labelNames.course,\n                            data: data.courseData,\n                            backgroundColor: 'rgba(156, 39, 176, 0.4)'\n                        },\n                        {\n                            label: data.labelNames.class,\n                            data: data.classData,\n                            backgroundColor: 'rgba(76, 175, 80, 0.4)'\n                        },\n                        {\n                            label: data.labelNames.my,\n                            data: data.myData,\n                            backgroundColor: 'rgba(33, 150, 243, 0.8)'\n                        }\n                    ]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            max: 100\n                        }\n                    }\n                }\n            });\n        },\n\n        /**\n         * Initialize individual student exam analysis chart.\n         *\n         * @param {Object|Array} params The data parameters for the chart.\n         */\n        initStudentExam: function(params) {\n            var data = Array.isArray(params) ? params[0] : params;\n            var canvas = document.getElementById('studentexamchart');\n\n            if (!canvas || !data) {\n                return;\n            }\n\n            var existingChart = Chart.getChart(canvas);\n            if (existingChart) {\n                existingChart.destroy();\n            }\n\n            new Chart(canvas.getContext('2d'), {\n                type: 'bar',\n                data: {\n                    labels: data.labels,\n                    datasets: [{\n                        label: data.chartLabel,\n                        data: data.chartData,\n                        backgroundColor: data.bgColors\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            max: 100\n                        }\n                    }\n                }\n            });\n        },\n\n        /**\n         * Initialize timeline (progress) chart.\n         *\n         * @param {Object|Array} params The data parameters for the chart.\n         */\n        initTimeline: function(params) {\n            var data = Array.isArray(params) ? params[0] : params;\n            var canvas = document.getElementById('timeline');\n\n            if (!canvas || !data) {\n                return;\n            }\n\n            var existingChart = Chart.getChart(canvas);\n            if (existingChart) {\n                existingChart.destroy();\n            }\n\n            new Chart(canvas.getContext('2d'), {\n                type: 'line',\n                data: {\n                    labels: data.labels,\n                    datasets: data.datasets\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            max: 100,\n                            title: {\n                                display: true,\n                                text: data.successLabel + ' (%)'\n                            }\n                        }\n                    },\n                    plugins: {\n                        legend: {\n                            position: 'bottom'\n                        }\n                    }\n                }\n            });\n        },\n\n        /**\n         * General purpose bar chart initializer for Teacher Dashboard.\n         *\n         * @param {string} elementId The ID of the canvas element.\n         * @param {Array} labels The labels for the x-axis.\n         * @param {Array} data The dataset values.\n         * @param {string} labelText The label for the dataset.\n         */\n        initBarChart: function(elementId, labels, data, labelText) {\n            var canvas = document.getElementById(elementId);\n\n            if (!canvas) {\n                return;\n            }\n\n            var existingChart = Chart.getChart(canvas);\n            if (existingChart) {\n                existingChart.destroy();\n            }\n\n            new Chart(canvas.getContext('2d'), {\n                type: 'bar',\n                data: {\n                    labels: labels,\n                    datasets: [{\n                        label: labelText,\n                        data: data,\n                        backgroundColor: '#ff9800',\n                        borderWidth: 1\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        y: {\n                            beginAtZero: true,\n                            max: 100\n                        }\n                    }\n                }\n            });\n        }\n    };\n});"],"names":["define","$","Chart","initStudentClass","params","data","Array","isArray","canvas","document","getElementById","existingChart","getChart","destroy","getContext","type","labels","datasets","label","labelNames","course","courseData","backgroundColor","class","classData","my","myData","options","responsive","maintainAspectRatio","scales","y","beginAtZero","max","initStudentExam","chartLabel","chartData","bgColors","initTimeline","title","display","text","successLabel","plugins","legend","position","initBarChart","elementId","labelText","borderWidth"],"mappings":";;;;;;;AAuBAA,oCAAO,CAAC,SAAU,iBAAiB,SAASC,EAAGC,aAGpC,CAMHC,iBAAkB,SAASC,YACnBC,KAAOC,MAAMC,QAAQH,QAAUA,OAAO,GAAKA,OAC3CI,OAASC,SAASC,eAAe,wBAEhCF,QAAWH,UAIZM,cAAgBT,MAAMU,SAASJ,QAC/BG,eACAA,cAAcE,cAGdX,MAAMM,OAAOM,WAAW,MAAO,CAC/BC,KAAM,MACNV,KAAM,CACFW,OAAQX,KAAKW,OACbC,SAAU,CACN,CACIC,MAAOb,KAAKc,WAAWC,OACvBf,KAAMA,KAAKgB,WACXC,gBAAiB,2BAErB,CACIJ,MAAOb,KAAKc,WAAWI,MACvBlB,KAAMA,KAAKmB,UACXF,gBAAiB,0BAErB,CACIJ,MAAOb,KAAKc,WAAWM,GACvBpB,KAAMA,KAAKqB,OACXJ,gBAAiB,6BAI7BK,QAAS,CACLC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACJC,EAAG,CACCC,aAAa,EACbC,IAAK,WAYzBC,gBAAiB,SAAS9B,YAClBC,KAAOC,MAAMC,QAAQH,QAAUA,OAAO,GAAKA,OAC3CI,OAASC,SAASC,eAAe,uBAEhCF,QAAWH,UAIZM,cAAgBT,MAAMU,SAASJ,QAC/BG,eACAA,cAAcE,cAGdX,MAAMM,OAAOM,WAAW,MAAO,CAC/BC,KAAM,MACNV,KAAM,CACFW,OAAQX,KAAKW,OACbC,SAAU,CAAC,CACPC,MAAOb,KAAK8B,WACZ9B,KAAMA,KAAK+B,UACXd,gBAAiBjB,KAAKgC,YAG9BV,QAAS,CACLC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACJC,EAAG,CACCC,aAAa,EACbC,IAAK,WAYzBK,aAAc,SAASlC,YACfC,KAAOC,MAAMC,QAAQH,QAAUA,OAAO,GAAKA,OAC3CI,OAASC,SAASC,eAAe,eAEhCF,QAAWH,UAIZM,cAAgBT,MAAMU,SAASJ,QAC/BG,eACAA,cAAcE,cAGdX,MAAMM,OAAOM,WAAW,MAAO,CAC/BC,KAAM,OACNV,KAAM,CACFW,OAAQX,KAAKW,OACbC,SAAUZ,KAAKY,UAEnBU,QAAS,CACLC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACJC,EAAG,CACCC,aAAa,EACbC,IAAK,IACLM,MAAO,CACHC,SAAS,EACTC,KAAMpC,KAAKqC,aAAe,UAItCC,QAAS,CACLC,OAAQ,CACJC,SAAU,gBAe9BC,aAAc,SAASC,UAAW/B,OAAQX,KAAM2C,eACxCxC,OAASC,SAASC,eAAeqC,cAEhCvC,YAIDG,cAAgBT,MAAMU,SAASJ,QAC/BG,eACAA,cAAcE,cAGdX,MAAMM,OAAOM,WAAW,MAAO,CAC/BC,KAAM,MACNV,KAAM,CACFW,OAAQA,OACRC,SAAU,CAAC,CACPC,MAAO8B,UACP3C,KAAMA,KACNiB,gBAAiB,UACjB2B,YAAa,KAGrBtB,QAAS,CACLC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACJC,EAAG,CACCC,aAAa,EACbC,IAAK"}