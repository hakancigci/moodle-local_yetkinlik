{"version":3,"file":"modal_viewer.min.js","sources":["../src/modal_viewer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Modal viewer for competency question review.\n *\n * @module     local_yetkinlik/modal_viewer\n * @copyright  2026 Hakan Çiğci {@link https://hakancigci.com.tr}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/str', 'core/notification'],\n    function($, ModalFactory, ModalEvents, Str, Notification) {\n\n    return {\n        /**\n         * Initialize the modal viewer for the given selector.\n         *\n         * @param {string} selector The CSS selector for the links (e.g., '.view-question-modal')\n         */\n        init: function(selector) {\n            $(selector).on('click', function(e) {\n                // Prevent the default link behavior (opening in a new tab).\n                e.preventDefault();\n\n                var targetUrl = $(this).attr('href');\n\n                // Fetch the translated string for the modal title.\n                // We use 'viewattempt' from our local_yetkinlik language file.\n                Str.get_string('viewattempt', 'local_yetkinlik').then(function(title) {\n\n                    // Create the Moodle Modal instance.\n                    return ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        title: title,\n                        body: '<iframe src=\"' + targetUrl + '\" width=\"100%\" height=\"600px\" frameborder=\"0\"></iframe>',\n                        large: true\n                    });\n\n                }).then(function(modal) {\n                    // Display the modal to the user.\n                    modal.show();\n\n                    // Destroy the modal from the DOM once it is hidden to free up memory.\n                    modal.getRoot().on(ModalEvents.hidden, function() {\n                        modal.destroy();\n                    });\n\n                    return;\n                }).catch(Notification.exception);\n            });\n        }\n    };\n});"],"names":["define","$","ModalFactory","ModalEvents","Str","Notification","init","selector","on","e","preventDefault","targetUrl","this","attr","get_string","then","title","create","type","types","CANCEL","body","large","modal","show","getRoot","hidden","destroy","catch","exception"],"mappings":";;;;;;;AAsBAA,sCAAO,CAAC,SAAU,qBAAsB,oBAAqB,WAAY,sBACrE,SAASC,EAAGC,aAAcC,YAAaC,IAAKC,oBAErC,CAMHC,KAAM,SAASC,UACXN,EAAEM,UAAUC,GAAG,SAAS,SAASC,GAE7BA,EAAEC,qBAEEC,UAAYV,EAAEW,MAAMC,KAAK,QAI7BT,IAAIU,WAAW,cAAe,mBAAmBC,MAAK,SAASC,cAGpDd,aAAae,OAAO,CACvBC,KAAMhB,aAAaiB,MAAMC,OACzBJ,MAAOA,MACPK,KAAM,gBAAkBV,UAAY,0DACpCW,OAAO,OAGZP,MAAK,SAASQ,OAEbA,MAAMC,OAGND,MAAME,UAAUjB,GAAGL,YAAYuB,QAAQ,WACnCH,MAAMI,gBAIXC,MAAMvB,aAAawB"}