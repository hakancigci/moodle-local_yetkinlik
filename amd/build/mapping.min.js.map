{"version":3,"file":"mapping.min.js","sources":["../src/mapping.js"],"sourcesContent":["define(['jquery', 'core/notification'], function($, Notification) {\n    return {\n        init: function() {\n            // Event delegation kullanarak dinamik eklenen satırlarda da çalışmasını sağlayalım\n            $(document).on('change', '.yetkinlik-select', function() {\n                var dropdown = $(this);\n                var competencyId = dropdown.val();\n                var questionId = dropdown.data('questionid');\n                var courseId = dropdown.data('courseid');\n\n                // M.cfg.wwwroot zaten Moodle sayfalarında tanımlıdır\n                var ajaxUrl = M.cfg.wwwroot + '/local/yetkinlik/ajax.php';\n\n                $.ajax({\n                    url: ajaxUrl,\n                    type: 'POST',\n                    data: {\n                        action: 'save_mapping',\n                        courseid: courseId,\n                        questionid: questionId,\n                        competencyid: competencyId,\n                        sesskey: M.cfg.sesskey\n                    },\n                    dataType: 'json',\n                    success: function(response) {\n                        if (response.status === 'ok' || response.status === 'deleted') {\n                            // Başarılı bildirim efekti\n                            dropdown.css('border-color', '#28a745');\n                            setTimeout(function() {\n                                dropdown.css('border-color', '');\n                            }, 2000);\n                        }\n                    },\n                    error: function(xhr, status, error) {\n                        // Alert yerine Moodle'ın kendi bildirim sistemini kullanıyoruz (no-alert hatası için)\n                        Notification.exception(new Error(error));\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","Notification","init","document","on","dropdown","this","competencyId","val","questionId","data","courseId","ajaxUrl","M","cfg","wwwroot","ajax","url","type","action","courseid","questionid","competencyid","sesskey","dataType","success","response","status","css","setTimeout","error","xhr","exception","Error"],"mappings":"AAAAA,iCAAO,CAAC,SAAU,sBAAsB,SAASC,EAAGC,oBACzC,CACHC,KAAM,WAEFF,EAAEG,UAAUC,GAAG,SAAU,qBAAqB,eACtCC,SAAWL,EAAEM,MACbC,aAAeF,SAASG,MACxBC,WAAaJ,SAASK,KAAK,cAC3BC,SAAWN,SAASK,KAAK,YAGzBE,QAAUC,EAAEC,IAAIC,QAAU,4BAE9Bf,EAAEgB,KAAK,CACHC,IAAKL,QACLM,KAAM,OACNR,KAAM,CACFS,OAAQ,eACRC,SAAUT,SACVU,WAAYZ,WACZa,aAAcf,aACdgB,QAASV,EAAEC,IAAIS,SAEnBC,SAAU,OACVC,QAAS,SAASC,UACU,OAApBA,SAASC,QAAuC,YAApBD,SAASC,SAErCtB,SAASuB,IAAI,eAAgB,WAC7BC,YAAW,WACPxB,SAASuB,IAAI,eAAgB,MAC9B,OAGXE,MAAO,SAASC,IAAKJ,OAAQG,OAEzB7B,aAAa+B,UAAU,IAAIC,MAAMH"}
